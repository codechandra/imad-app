<!DOCTYPE html>
<html>
    <head>
        <title>HOME PAGE</title>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
       <!-- <meta name="viewport" content="width=device-width,intial-scale=1.0">-->
        <!--<link rel="stylesheet" type="text/css" href="/ui/Blood.css>-->
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <script type="text/javascript">
        

function need()
{
  document.getElementById('needd').style.display='block';
    document.getElementById('donatee').style.display='none';
}
function donate()
{
  document.getElementById('donatee').style.display='block';
  document.getElementById('needd').style.display='none';
}

function donor()
{
    var d;
    var num=document.getElementById('number_donor').value;
    var group=document.getElementById('donor_group');
    var opt = group.options[group.selectedIndex].text;
    var donor_name=document.getElementById('name_donor').value;
    var s='donor/'+num+'$'+opt+'$'+donor_name;
    var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        d=JSON.stringify(this.responseText);
    document.getElementById("main").style.display = 'none';
      document.getElementById("demo").innerHTML = d[0].donor_mobile;
    }
  };
  xhttp.open("GET", "/"+s, true);
  xhttp.send();
   
    
}
var i=0,l=0;
function recipent()
{
   
    var num=document.getElementById('number_recipent').value;
    var group=document.getElementById('recipent_group');
    var opt = group.options[group.selectedIndex].text;
    var recipent_name=document.getElementById('name_recipent').value;
    var s="/recipent/"+num+"$"+opt+"$"+recipent_name;
    var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       // d=JSON.parse(this.responseText);
    document.getElementById("main").style.display = 'none';
     d=(JSON.parse(this.responseText));
     l=d.length;
     document.getElementById("1").innerHTML = d[i]["donor_name"];
    document.getElementById("2").innerHTML = d[i]["donor_mobile"];
    document.getElementById("3").innerHTML = d[i]["donor_group"];
    }
  };
  
  xhttp.open("GET", s, true);
  xhttp.send();
  }
  function nextt(){
      i++;
      if(i==l)
      {
          document.getElementById('id01').style.display="block";
          //document.getElementByid('nexttt').innerHTML="No more donors";
         //document.getElementByid('nexttt').disabled=true;
          
      }
      else
      {
       document.getElementById("1").innerHTML = d[i]["donor_name"];
    document.getElementById("2").innerHTML = d[i]["donor_mobile"];
    document.getElementById("3").innerHTML = d[i]["donor_group"];
      }
  }
/*var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope) {
    $scope.nam = f;*/

/*function geet(){
var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope, $http) {
    $http.get("/hai")
    .then(function(response) {
        $scope.myWelcome = response.data;
        
    });
});
}*/
 
        </script>
    </head>
    <body class=" w3-center " style="margin-top:10%;margin-left:30%;margin-right:30%;background-color:" >

        <div id="main" class="w3-card-4 ">
      <div class=" " >
        <div class=" w3-center w3-container ">
        <h1>E-Blood Bank</h1>
        <button onclick="need()" class="w3-button w3-black w3-hover-red">Need Blood</button>
        <button onclick="donate()" class="w3-button w3-black w3-hover-red">Donate Blood</button>
      </div>
        </div>
        <pre>    
        </pre>
        <div class=" w3-container  w3-center " id="needd" style="display:block">
           <input  maxlength="10" class="w3-input w3-border w3-hover-grey w3-input" type="text" placeholder="Enter your mobile number" id="number_recipent"><br>
          <input  class="w3-input w3-input w3-border w3-hover-grey" type="text" placeholder="Enter your name" id="name_recipent"><br>
          Select the Blood group you need
          <select class="" id="recipent_group">
            <option value="A-">A-</option>
            <option value="A+">A+</option>
             <option value="A-">AB-</option>
            <option value="A+">AB+</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="o-">o-</option>
             <option value="o+">o+</option>
          </select><br/>
          <button onclick="recipent()" class="w3-button w3-black w3-hover-red">Find the Donor</button>
        </div>
        <div class=" w3-container  w3-center " id="donatee" style="display:none">
             <input class="w3-input w3-border w3-hover-grey w3-input" type="text"  placeholder="Enter your name" id="name_donor"><br>
            <input maxlength="10" class="w3-input w3-border w3-hover-grey w3-input" type="text" placeholder="Enter your mobile number" id="number_donor"><br>
          Select your Blood group
          <select id="donor_group">
             <option value="A-">A-</option>
            <option value="A+">A+</option>
             <option value="A-">AB-</option>
            <option value="A+">AB+</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="o-">o-</option>
             <option value="o+">o+</option>
          </select><br/>
          <button onclick="donor()" class="w3-button w3-black w3-hover-green">Donate</button>
        </div>
        </div>
        <div id="" class="w3-container w3-card-4">
            <h1 style="border:2px solid grey" id="1"></h1>
             <h1 style="border:2px solid grey" id="2"></h1>
             <h1 style="border:2px solid grey" id="3"></h1>
             <button id="nexttt" onclick="nextt()">Show the details of next donor</button>
        </div>
         <div id="id01" class="w3-modal">
    <div class="w3-modal-content w3-animate-top w3-card-4">
      <header class="w3-container w3-teal"> 
        <span onclick="document.getElementById('id01').style.display='none'" 
        class="w3-button w3-display-topright">&times;</span>
        <h2>Oops!!</h2>
      </header>
      <div class="w3-container">
        <p>There are no more donors.We deeply regret our helplessness.Hoping that you'll definetly be helped.May god be with you.</p>
    
      </div>
      <footer class="w3-container w3-teal">
        <p>E-blood bank</p>
      </footer>
    </div>
  </div>
    </body>
    
</html>